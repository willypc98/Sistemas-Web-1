drop database if exists teacherCloud;

create database teacherCloud;

use teacherCloud;


/*USUARIO*/

create table TCusuario(
usuario_modo varchar (20) not null,
usuario_email varchar (20) not null,
usuario_nombre varchar (20) not null,
usuario_pass varchar (20) not null,
primary key(usuario_modo,usuario_email)
 );

/*ALUMNO*/

create table TCalumno(
alumno_modo varchar (20) not null,
alumno_email varchar (20) not null,
clase_identificador int (10),
alumno_monedero int (100),
primary key(alumno_modo,alumno_email),
foreign key (alumno_modo,alumno_email) REFERENCES TCusuario(usuario_modo,usuario_email)
);


/*PROFESOR*/

create table TCprofesor(
profesor_modo varchar (20) not null,
profesor_email varchar (20) not null,
clase_identificador int (10) not null,
primary key(profesor_modo,profesor_email),
foreign key (profesor_modo,profesor_email) REFERENCES TCusuario(usuario_modo,usuario_email)
);

/*CLASE*/

create table TCclase(
clase_identificador int (10) auto_increment not null,
clase_nombre varchar (20) not null,
clase_descripcion varchar (50),
clase_calificacion int (2),
clase_alumno_email varchar (20) not null,
clase_alumno_modo varchar (20) not null,
clase_profesor_email varchar (20) not null,
clase_profesor_modo varchar (20) not null,
primary key(clase_identificador),
foreign key (clase_profesor_modo,clase_profesor_email) REFERENCES TCprofesor (profesor_modo,profesor_email),
foreign key (clase_alumno_modo,clase_alumno_email) REFERENCES TCalumno (alumno_modo,alumno_email)
);

/*CHAT*/



/*INCIDENCIAS*/

create table TCincidencia(
incidencias_identificador integer primary key auto_increment not null,
incidencias_descripcion varchar (50) not null
);



/*ALTERACIONES*/

alter table TCalumno ADD CONSTRAINT foreign key (clase_identificador) REFERENCES TCclase(clase_identificador);

alter table TCprofesor ADD CONSTRAINT foreign key (clase_identificador) REFERENCES TCclase(clase_identificador);

